
<%= partial :search_header, :locals => {page:  page} %>

<div class="row-fluid">
  <div class="col-md-3"></div>
  <div class="col-md-9">
    <% unless flash[:error].nil? %>
      <div class="alert alert-error">
        <%= flash[:error] %>
      </div>
    <% end %>

    <%# unless page[:page].nil? || page[:paginate].nil? || params['q']   == "" %>
    <%= partial :search_box, :locals => {page: page} %>
    <% if page[:items].size == 0 %>
      <div class="alert">
        Nothing found

      <br /> ----- TODO: add notes on how to refine search ----<br/>
      </div>

    <% else %>
        <div>
          <h5 style="text-transform: uppercase;">
            Displaying <%= page[:items].offset+1 %> -
            <%  if page[:items].next_page.nil? %>
               <%= page[:items].total_entries %>
            <% else %>
                <%= page[:items].offset + page[:items].per_page %>
            <% end %>
            of <%= page[:items].total_entries %> entries
          </h5>
        </div>

      <div class="item-paging">
        <%= will_paginate page[:items], :renderer => BootstrapPagination::Sinatra %>
      </div>

      <%= partial :item_list, :locals => {page: page} %>

      <div class="item-paging bottom">
        <%= will_paginate page[:items], :renderer => BootstrapPagination::Sinatra %>
      </div>
    <% end %>
  </div>
</div>
<%= partial :search_footer, :page => page %>
